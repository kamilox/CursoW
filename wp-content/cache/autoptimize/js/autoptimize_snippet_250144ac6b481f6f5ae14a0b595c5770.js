$=jQuery.noConflict();$(document).ready(function(){$('#hide_from_live').click(function(){if($('#hide_from_live_hidden').val()==0){$('#hide_from_live_hidden').val(1)}else{$('#hide_from_live_hidden').val(0)}});$('#feature_category').click(function(){if($('#feature_category_hidden').val()==0){$('#feature_category_hidden').val(1)}else{$('#feature_category_hidden').val(0)}});if($('#hide_from_live_hidden').val()==1){$('#hide_from_live').attr('checked',true);}else{$('#hide_from_live').attr('checked',false);}
if($('#feature_category_hidden').val()==1){$('#feature_category').attr('checked',true);}else{$('#feature_category').attr('checked',false);}});function closeDiv(className){var close=$('.'+className).parents().eq(0).attr('id');if($('#'+close).attr('id')!="id-1"){$('#'+close).remove();}else{$('.messages').addClass('error').html('Sorry you canÂ´t delete this row');setTimeout(function(){$('.error').css({'height':'0','padding':'0','margin':'0','visibility':'hidden','opacity':'0',});},3000);}}
function imageBefore(id,idRefer,newItem){console.log(id,idRefer,newItem);if(idRefer=='x'){var divFather=$('.'+id).parents().eq(2).attr('id');}else{divFather=idRefer;}
var mediaUploaderBefore;if(mediaUploaderBefore){mediaUploaderBefore.open();return;}
mediaUploaderBefore=wp.media.frames.file_frames=wp.media({title:'Upload picture',button:{text:'Choose picture'},multiple:false});mediaUploaderBefore.on('select',function(){attachment=mediaUploaderBefore.state().get('selection').first().toJSON();$('#'+divFather+' .gallery-before .image-container .picture-before').attr('src',attachment.url);$('#'+divFather+' .gallery-before .button-container .profile_picture_before').val(attachment.url);var index=attachment.url+'*'+'gallery-before*'+divFather;$('#'+divFather+' .gallery-before .button-container .button-load-before').attr({value:'Update image',class:'button update_image_before',onclick:'updateImage("update_image_before","before")'});saveUrl(index,newItem);});mediaUploaderBefore.open();}
function imageAfter(id,idRefer,newItem){console.log(id,idRefer,newItem);if(idRefer=='y'){var divFather=$('.'+id).parents().eq(2).attr('id');}else{divFather=idRefer;}
var mediaUploaderAfter;if(mediaUploaderAfter){mediaUploaderAfter.open();return;}
mediaUploaderAfter=wp.media.frames.file_frames=wp.media({title:'Upload picture',button:{text:'Choose picture'},multiple:false});var acum=$('#images').val();mediaUploaderAfter.on('select',function(){attachment=mediaUploaderAfter.state().get('selection').first().toJSON();$('#'+divFather+' .gallery-after .image-container .picture-after').attr('src',attachment.url);$('#'+divFather+' .gallery-after .button-container .profile_picture_after').val(attachment.url);var index=attachment.url+'*'+'gallery-after*'+divFather;$('#'+divFather+' .gallery-after .button-container .button-load-after').attr({value:'Update image',class:'button update_image_after',onclick:'updateImage("update_image_after","after")'});saveUrl(index,newItem);});mediaUploaderAfter.open();}
var acum="";function saveUrl(url,newItem){var acumArray=[];if(newItem=="newItem"){acum=acum+url+';';$('#images').val(acum);}
if(newItem>=0){var acumSplit=acum.split(';');acumSplit.splice(newItem,1,url);$('#images').val("");$('#images').val(acumSplit);}}
var itemIndex="";function updateImage(buttonClass,divPosition){var removeItem="";var sourceData=[];var idRefer=$('.'+buttonClass).parents().eq(2).attr('id');var classParent1=$('.'+buttonClass).parents().eq(1).attr('class').split(" ").pop();var classParent0=$('.'+buttonClass).parents().eq(0).attr('class');var urlRefer=$('#'+idRefer+' .'+classParent1+' .'+classParent0+' .profile_picture_'+divPosition+'').attr('value');sourceData=$('#images').val().split(';');removeItem=urlRefer+'*'+classParent1+'*'+idRefer;itemIndex=sourceData.indexOf(removeItem);if(divPosition=="before"){imageBefore('button-load-before',idRefer,itemIndex);}
if(divPosition=="after"){imageAfter('button-load-after',idRefer,itemIndex);}};